# 错误处理

## 1.Error

1. `js`有一个`Error`类，用于处理异常

```ts
try {
    throw new Error("Something bad happened");
} catch (e) {
    console.log(e);
}
```

2. 错误对象显示 3 个属性

-   `name`: 错误的类型。
-   `message`: 包含错误消息的字符串。
-   `stack`: 函数执行的堆栈跟踪。

3. 额外的内置错误子类型，继承自`Error`类
4. 不需要 `throw` 抛出一个错误, 使用 `Error` 对象的基本好处是，它能自动跟踪堆栈的属性构建以及生成位置

## 2.Error 类型

1. `RangeError`
    - 当数字类型变量或者参数超出其有效范围时，出现 `RangeError` 的错误提示
    ```ts
    // 使用过多参数调用 console
    // RangeError: 数组长度无效
    console.log.apply(console, new Array(1000000000));
    ```
2. `ReferenceError`
    - 当引用无效时，会出现 `ReferenceError` 的错误提示
    ```ts
    "use strict";
    console.log(notValidVar); // ReferenceError: notValidVar 未定义
    ```
3. `SyntaxError`
    - 当解析无效 `JavaScript` 代码时，会出现 `SyntaxError` 的错误提示
    ```ts
    1 *** 3 // SyntaxError: 无效的标记 *
    ```
4. `TypeError`
    - 变量或者参数不是有效类型时，会出现 TypeError 的错误提示
    ```ts
    "1.2".toPrecision(1); // TypeError: '1.2'.toPrecision 不是函数。
    ```
5. `URIError`
    - 当传入无效参数至 `encodeURI()` 和 `decodeURI()` 时，会出现 `URIError` 的错误提示
    ```ts
    decodeURI("%"); // URIError: URL 异常
    ```
6. `EvalError`

    - 当`eval`使用不当时便会抛出`EvalError`

    ```ts
    try {
        throw new EvalError("EvalError has occurred");
    } catch (e) {
        console.log(e instanceof EvalError); // true
        console.log(e.message); // EvalError has occurred
        console.log(e.name); // EvalError
    }
    ```

7. `InternalError`
    - `InternalError` 对象表示出现在`JavaScript` 引擎内部的错误。 例如：` "InternalError: too much recursion"`（内部错误：递归过深）。
8. `DOMException`
    - 浏览器违规操作 dom
    ```ts
    // Uncaught DOMException: Node.appendChild: May not add a Document as a child
    document.body.appendChild(document.cloneNode(true));
    ```

## 3.同步错误处理

```js
try {
    console.log("step1");
    throw EvalError("2222");
} catch (error) {
    console.log("step2");
} finally {
    console.log("step3");
}
```
